# MySQL高级面试题整理及答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、从锁的类别角度讲，MySQL都有哪些锁呢？

**从锁的类别上来讲，有共享锁和排他锁**

**1、** 共享锁: 又叫做读锁。当用户要进行数据的读取时，对数据加上共享锁。共享锁可以同时加上多个。

**2、** 排他锁: 又叫做写锁。当用户要进行数据的写入时，对数据加上排他锁。排他锁只可以加一个，他和其他的排他锁，共享锁都相斥。

锁兼容性如下：

![](https://user-gold-cdn.xitu.io/2020/5/23/172412db1d202759?w=1045&h=229&f=png&s=68561#alt=)


### 2、说一下大表查询的优化方案

**1、** 优化shema、sql语句+索引；

**2、** 可以考虑加缓存，Memcached, Redis，或者JVM本地缓存；

**3、** 主从复制，读写分离；

**4、** 分库分表；


### 3、为什么要使用数据库

**数据保存在内存**

**优点：**

存取速度快

**缺点：**

数据不能永久保存

**数据保存在文件**

**优点：**数据永久保存

**缺点：**

**1、** 速度比内存操作慢，频繁的IO操作。

**2、** 查询数据不方便

**数据保存在数据库**

**1、** 数据永久保存

**2、** 使用SQL语句，查询方便效率高。

**3、** 管理数据方便


### 4、什么是事务的隔离级别？MySQL的默认隔离级别是什么？

为了达到事务的四大特性，数据库定义了4种不同的事务隔离级别，由低到高依次为Read uncommitted、Read committed、Repeatable read、Serializable，这四个级别可以逐个解决脏读、不可重复读、幻读这几类问题。

| 隔离级别 | 脏读 | 不可重复读 | 幻影读 |
| --- | --- | --- | --- |
| READ-UNCOMMITTED | √ | √ | √ |
| READ-COMMITTED | × | √ | √ |
| REPEATABLE-READ | × | × | √ |
| SERIALIZABLE |  |  |  |


**SQL 标准定义了四个隔离级别：**

**1、** READ-UNCOMMITTED(读取未提交)：

最低的隔离级别，允许读取尚未提交的数据变更，**可能会导致脏读、幻读或不可重复读**。

**2、** READ-COMMITTED(读取已提交)： 允许读取并发事务已经提交的数据，**可以阻止脏读，但是幻读或不可重复读仍有可能发生**。

**3、** REPEATABLE-READ(可重复读)：

对同一字段的多次读取结果都是一致的，除非数据是被本身事务自己所修改，**可以阻止脏读和不可重复读，但幻读仍有可能发生**。

**4、** SERIALIZABLE(可串行化)：

最高的隔离级别，完全服从ACID的隔离级别。所有的事务依次逐个执行，这样事务之间就完全不可能产生干扰，也就是说，**该级别可以防止脏读、不可重复读以及幻读**。

**注意：**

**1、** 这里需要注意的是：MySQL 默认采用的 REPEATABLE_READ隔离级别 Oracle 默认采用的 READ_COMMITTED隔离级别

**2、** 事务隔离机制的实现基于锁机制和并发调度。其中并发调度使用的是MVVC（多版本并发控制），通过保存修改的旧版本信息来支持并发一致性读和回滚等特性。

**3、** 因为隔离级别越低，事务请求的锁越少，所以大部分数据库系统的隔离级别都是**READ-COMMITTED(读取提交内容):**，但是你要知道的是InnoDB 存储引擎默认使用 **REPEATABLE-READ（可重读）**并不会有任何性能损失。

**4、** InnoDB 存储引擎在 **分布式事务** 的情况下一般会用到**SERIALIZABLE(可串行化)**隔离级别。


### 5、为表中得字段选择合适得数据类型

字段类型优先级: 整形>date,time>enum,char>varchar>blob,text

优先考虑数字类型，其次是日期或者二进制类型，最后是字符串类型，同级别得数据类型，应该优先选择占用空间小的数据类型


### 6、为什么要尽量设定一个主键？

主键是数据库确保数据行在整张表唯一性的保障，即使业务上本张表没有主键，也建议添加一个自增长的ID列作为主键。设定了主键之后，在后续的删改查的时候可能更加快速以及确保操作数据范围安全。


### 7、有多少种日志

innodb两种日志redo和undo。


### 8、什么是聚簇索引？何时使用聚簇索引与非聚簇索引

**聚簇索引：**

将数据存储与索引放到了一块，找到索引也就找到了数据

**非聚簇索引：**

将数据存储于索引分开结构，索引结构的叶子节点指向了数据的对应行，myisam通过key_buffer把索引先缓存到内存中，当需要访问数据时（通过索引访问数据），在内存中直接搜索索引，然后通过索引找到磁盘相应数据，这也就是为什么索引不在key buffer命中时，速度慢的原因

**澄清一个概念：**

innodb中，在聚簇索引之上创建的索引称之为辅助索引，辅助索引访问数据总是需要二次查找，非聚簇索引都是辅助索引，像复合索引、前缀索引、唯一索引，辅助索引叶子节点存储的不再是行的物理位置，而是主键值

**何时使用聚簇索引与非聚簇索引**

![99_5.png][99_5.png]


### 9、什么是非标准字符串类型？

**1、** TINYTEXT

**2、** TEXT

**3、** MEDIUMTEXT

**4、** LONGTEXT


### 10、MySQL中有哪些不同的表格？

共有5种类型的表格：

**1、**  MyISAM

**2、**  Heap

**3、**  Merge

**4、**  INNODB

**5、**  ISAM


### 11、存储引擎选择
### 12、MYSQL数据库服务器性能分析的方法命令有哪些?
### 13、什么叫视图？游标是什么？
### 14、列的字符串类型可以是什么？
### 15、InnoDB引擎的4大特性，了解过吗
### 16、什么是脏读？幻读？不可重复读？
### 17、非主键索引一定会查询多次吗？
### 18、为什么官方建议使用自增长主键作为索引？
### 19、MYSQL支持事务吗？
### 20、索引具体采用那种数据结构呢？
### 21、100.MySQL一条SQL加锁分析
### 22、创建索引有什么原则呢？
### 23、数据库中的事务是什么?
### 24、MySQL中DATETIME和TIMESTAMP的区别
### 25、MyISAM表格将在哪里存储，并且还提供其存储格式？
### 26、你怎么看到为表格定义的所有索引？
### 27、优化特定类型的查询语句
### 28、创建索引的三种方式
### 29、MySQL支持事务吗？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
